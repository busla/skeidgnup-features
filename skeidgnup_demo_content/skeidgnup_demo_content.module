<?php
/**
* @file
* Generates demo content for Skeiðgnúp.
*/

function skeidgnup_demo_content_help($path, $arg) {
  switch ($path) {
    case "admin/help#skeidgnup_demo_content":
      return '<p>' . t("Býr til efni úr Lorem ipsum texta í allar efnistípur") . '</p>';
      break;
  }
}

function skeidgnup_demo_content_drupal_ipsum_vocabularies() {
  return array(
    'icelandic' => array( // Your vocabulary's machine_name.
      'title' => 'Icelandic words',
      'words' => array(
        'minnum',
        'á',
        'strætóferðirnar',
        'óviðráðanlegum',
        'orsökum',
        'sveitarstjórnarfundi',
        'desember',
        'fundurinn',
        'deiliskipulags',
        'í',
        'og',
        'með',
        'saman',
        'örlítið',
        'ljósleiðarakerfis',
        'spildu',
        'landi',
        'ESA', 
        'að', 
        'þeirri', 
        'niðurstöðu', 
        'að', 
        'það',
        'væri',
        'til',
        'þess',
        'fallið',
        'auka',
        'samkeppnishæfni',
        'þessa', 
      ),
    ),
  );
}

function skeidgnup_demo_content_menu() {
  $items['skeidgnup-demo-content'] = array(
    'title' => 'Demo content',
    'description' => t('Create loads of content!'),
    'page callback' => 'skeidgnup_demo_content_makeit',
    'access callback' => TRUE,
    'access arguments' => array('administer site configuration'),
    'type' => MENU_NORMAL_ITEM,
    'menu_name' => 'navigation',
  );
  return $items;
}

function skeidgnup_demo_content_makeit() {
/**
* Basic Node Creation Example for Drupal 7
*
* This example:
* - Assumes a standard Drupal 7 installation
* - Does not verify that the field values are correct
*/
  // Create some vocabs
  
  $public_uri  =  'public://skeidgnup-logo.png';
  $number_of_nodes = 10;
  $body_text = drupal_ipsum_generate('icelandic', 15, DRUPAL_IPSUM_TYPE_SENTENCE, DRUPAL_IPSUM_START_ANY, TRUE);
  $node = new stdClass();
  $node->type = 'post';
  node_object_prepare($node);
  $node->comment = 1;   
  $node->title    = drupal_ipsum_generate('icelandic', 4, DRUPAL_IPSUM_TYPE_WORD, DRUPAL_IPSUM_START_ANY, FALSE);
  $node->language = LANGUAGE_NONE;
  $node->field_post_body[$node->language][0]['value']   = $body_text;
  $node->field_post_body[$node->language][0]['summary'] = text_summary($body_text);
  $node->field_post_body[$node->language][0]['format']  = 'filtered_html';
  $node->field_tax_categories[$node->language][]['tid'] = 1;
  $path = 'content/programmatically_created_node_' . date('His');

  // add skeidgnup-logo.png as file object
  $logo_uri = path_to_theme() . '/skeidgnup-logo.png';
  $file = (object) array(
    'uid' => 1,
    'uri' => $logo_uri,
    'filemime' => file_get_mimetype($logo_uri),
    'status' => 1,
    'display' => 1,
  );
  
  $file_obj = file_uri_to_object($logo_uri, FALSE);
  $file = file_copy($file, 'public://', FILE_EXISTS_RENAME);
  $node->field_post_image = array(LANGUAGE_NONE => array('0' => (array)$file));
 
  if($node = node_submit($node)) { // Prepare node for saving
    node_save($node);
    return "Node with nid " . $node->nid . " saved! fid = " . $file->fid;
  }
}